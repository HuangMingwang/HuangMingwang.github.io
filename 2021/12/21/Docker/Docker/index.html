<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Docker | MingwHuang's Blog</title><meta name="keywords" content="Docker"><meta name="author" content="MingwHuang"><meta name="copyright" content="MingwHuang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="第一章 Docker概述1.1 虚拟化技术发展史在虚拟化技术出现之前，如果我们想搭建一台服务器，我们需要做如 下的工作:  购买一台硬件服务器;  在硬件服务器上安装配置操作系统系统;  在操作系统之上配置应用运行环境;   部署并运行应用;   这种方式的缺点就是:  部署应用非常慢;  需要花费的成本非常高(时间成本、服务器成本);  应用迁移麻烦;要将应用迁移，又得重复部署应用的过程:购买">
<meta property="og:type" content="article">
<meta property="og:title" content="Docker">
<meta property="og:url" content="http://example.com/2021/12/21/Docker/Docker/index.html">
<meta property="og:site_name" content="MingwHuang&#39;s Blog">
<meta property="og:description" content="第一章 Docker概述1.1 虚拟化技术发展史在虚拟化技术出现之前，如果我们想搭建一台服务器，我们需要做如 下的工作:  购买一台硬件服务器;  在硬件服务器上安装配置操作系统系统;  在操作系统之上配置应用运行环境;   部署并运行应用;   这种方式的缺点就是:  部署应用非常慢;  需要花费的成本非常高(时间成本、服务器成本);  应用迁移麻烦;要将应用迁移，又得重复部署应用的过程:购买">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://typora-mingwhuang.oss-cn-shenzhen.aliyuncs.com/typora/202202272047554.jpg">
<meta property="article:published_time" content="2021-12-21T08:42:14.000Z">
<meta property="article:modified_time" content="2022-02-22T13:55:23.929Z">
<meta property="article:author" content="MingwHuang">
<meta property="article:tag" content="Docker">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://typora-mingwhuang.oss-cn-shenzhen.aliyuncs.com/typora/202202272047554.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2021/12/21/Docker/Docker/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":500},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Docker',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-02-22 21:55:23'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.0.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://typora-mingwhuang.oss-cn-shenzhen.aliyuncs.com/typora/202202272113875.JPG" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">42</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">41</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">20</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://typora-mingwhuang.oss-cn-shenzhen.aliyuncs.com/typora/202202272047554.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">MingwHuang's Blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Docker</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-12-21T08:42:14.000Z" title="发表于 2021-12-21 16:42:14">2021-12-21</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-02-22T13:55:23.929Z" title="更新于 2022-02-22 21:55:23">2022-02-22</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Docker/">Docker</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Docker"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="第一章-Docker概述"><a href="#第一章-Docker概述" class="headerlink" title="第一章 Docker概述"></a>第一章 Docker概述</h1><h2 id="1-1-虚拟化技术发展史"><a href="#1-1-虚拟化技术发展史" class="headerlink" title="1.1 虚拟化技术发展史"></a>1.1 虚拟化技术发展史</h2><p>在虚拟化技术出现之前，如果我们想搭建一台服务器，我们需要做如 下的工作:</p>
<ol>
<li><p>购买一台硬件服务器;</p>
</li>
<li><p>在硬件服务器上安装配置操作系统系统;</p>
</li>
<li><p>在操作系统之上配置应用运行环境; </p>
</li>
<li><p>部署并运行应用;</p>
</li>
</ol>
<p>这种方式的缺点就是:</p>
<ol>
<li><p>部署应用非常慢;</p>
</li>
<li><p>需要花费的成本非常高(时间成本、服务器成本);</p>
</li>
<li><p>应用迁移麻烦;要将应用迁移，又得重复部署应用的过程:购买 服务器 -&gt; 安装操作系统 OS -&gt; 配置运行环境 -&gt; 部署应用 所以，为了解决这个问题，后续出现了虚拟化技术。</p>
</li>
</ol>
<h2 id="1-2-虚拟化技术是什么？"><a href="#1-2-虚拟化技术是什么？" class="headerlink" title="1.2 虚拟化技术是什么？"></a>1.2 虚拟化技术是什么？</h2><p>虚拟化(英语:Virtualization)是一种计算机资源管理技术，是将计算 机的各种硬件资源，比如服务器、网络、CPU、内存及存储等，予以 抽象和转换后呈现出一套新的硬件资源环境，在这一套新的硬件环境 下可以安装我们的操作系统，部署我们的应用运行环境等，它打破计算机硬件资源不可切割的障碍，使我们可以比原本的计算机硬件资源 结构更好的方式来组合应用这些资源。             </p>
<h2 id="1-3-虚拟化技术的分类"><a href="#1-3-虚拟化技术的分类" class="headerlink" title="1.3 虚拟化技术的分类"></a>1.3 虚拟化技术的分类</h2><p>虚拟化一般分为：</p>
<p>虚拟化一般分为: <strong>硬件级虚拟化</strong>(hardware-level-virtualization) <strong>操作系统级虚拟化</strong>(os-level-virtualization)</p>
<p><strong>硬件级虚拟化</strong> 是运行在硬件之上的虚拟化技术，它的核心技术是 Hypervisor 发音 [,haipə’vaizə]，Hypervisor 是一种运行在基础物理服 务器硬件之上的软件层，可以虚拟化硬件资源，例如 cpu、硬盘、内 存资源等。然后我们可以通过在虚拟化出来的资源之上安装操作系统， 这也就是所谓的虚拟机。像 VMWare, VirtualBox 等都是使用该技术， 我们经常使用的桌面版的虚拟机 VMWare 就是采用这种虚拟化技术。 如下图所示:</p>
<p><img src="https://typora-mingwhuang.oss-cn-shenzhen.aliyuncs.com/typora/202112212131390.png" alt="image-20201216232406720"></p>
<h2 id="1-4-虚拟化技术的优缺点"><a href="#1-4-虚拟化技术的优缺点" class="headerlink" title="1.4 虚拟化技术的优缺点"></a>1.4 虚拟化技术的优缺点</h2><p><strong>优点</strong></p>
<p>一台物理服务器可以虚拟化出多个虚拟的服务器，让计算机资源得已充分利用；</p>
<p><strong>缺点</strong></p>
<ol>
<li>每创建一个虚拟机的时候，都会创建一个操作系统，这个操作系 统会占用很多资源，这样无疑大大的增加了资源的消耗，当安装的虚 拟机越多，资源消耗就越多。 </li>
<li>环境兼容性问题，开发时的环境运行正常，部署到虚拟机环境测 试则有可能发生错误;</li>
</ol>
<h2 id="1-5-容器技术的发展"><a href="#1-5-容器技术的发展" class="headerlink" title="1.5 容器技术的发展"></a>1.5 容器技术的发展</h2><p>基于硬件级虚拟化技术的缺点和不足，后续又发展出来了另一种虚拟 化技术，即操作系统级虚拟化技术;<br> <strong>操作系统级虚拟化</strong> 是运行在操作系统之上的虚拟化技术，它模拟的 是运行在一个操作系统上的多个不同进程，并将其封装在一个密闭的 容器里面，该技术也称为容器化技术。</p>
<p>在容器化技术领域，Docker 是目前最流行的一种实现。Docker 发布于 2013 年，Docker 基于 LXC 技术，LXC 是 Linux 平台上的容器化技 术实现。<br> 注:LXC 是 Linux Container 的简写，它是一种内核虚拟化技术，可 以提供轻量级的虚拟化，以便隔离进程和资源，它与宿主机使用同一 个内核，性能损耗小，这种技术是 Linux 提供的，但是直到 Docker 出世，该技术才被发挥出来。</p>
<h2 id="1-6-Docker的发展历史"><a href="#1-6-Docker的发展历史" class="headerlink" title="1.6 Docker的发展历史"></a>1.6 Docker的发展历史</h2><h2 id="1-7-Docker是什么"><a href="#1-7-Docker是什么" class="headerlink" title="1.7 Docker是什么"></a>1.7 Docker是什么</h2><ol>
<li>Docker 是一个开源的应用容器引擎，它基于 Google 公司推出的 Go 语言实现，项目代码托管在 GitHub 上进行维护; <a target="_blank" rel="noopener" href="https://github.com/docker/docker-ce">https://github.com/docker/docker-ce</a></li>
<li>Docker 技术让开发者可以打包他们的应用以及依赖包到一个可移 植的容器中，打包好的容器可以发布到任何流行的 Linux 服务器上运 行，这样就可以解决开发环境与运维环境不一致的问题了，所以容器 技术解决了开发和运维之间的矛盾，让开发专注于开发，运维专注于 运维，不要被环境问题所打扰;</li>
<li>Docker彻底释放了虚拟化的威力，极大降低了计算机资源供应的成本，Docker重新定义了程序开发测试、交付和部署过程，Docker提出了“构建一次，到处运行”的理念，让应用的开发、测试、部署和分发都变得前所未有的高效和轻松！</li>
<li>Docker 是一种轻量级的操作系统虚拟化解决方案，Docker 的基础 是 Linux 容器(LXC)技术，在 LXC 的基础上 Docker 进行了进一步 的封装，让用户不需要去关心容器的管理，使得操作更为简便。用户 操作 Docker 的容器就像操作一个快速轻量级的虚拟机一样简单; Docker 自开源后受到广泛的关注，Docker最早是基于Ubuntu开发的， 但后续 CentOS、Debian、Fedora 等主流的 Linux 操作系统都支持 Docker;</li>
</ol>
<p>**总结:**简单地说，Docker 是对软件和其依赖环境的标准化打包，应用 之间相互隔离，共享一个 OS Kernel(解决了资源浪费的问题)，可 以运行在很多主流操作系统上;<br> 但是也需要澄清一下，Docker 本身不是容器，Docker 只是管理容器 的引擎。</p>
<h2 id="1-8-容器和虚拟机的区别"><a href="#1-8-容器和虚拟机的区别" class="headerlink" title="1.8 容器和虚拟机的区别"></a>1.8 容器和虚拟机的区别</h2><p>容器是将代码和环境的关系打包在一起的一个集合，而虚拟机是在物理层面上，分出来的一个操作系统；</p>
<p>多个容器可以运行在同一台物理服务器上，并共享一个操作系统内核资源。多个虚拟机也可以运行在同一台机器上，但每台虚拟机都需要一个完整的操作系统；</p>
<p>下图比较了Docker和传统虚拟化方式的不同之处：</p>
<p><img src="https://typora-mingwhuang.oss-cn-shenzhen.aliyuncs.com/typora/202112212131391.png" alt="image-20201216235006051"></p>
<p>可见容器是在本地操作系统层面上实现虚拟化，直接复用本地主机的操作系统，不需要单独安装操作系统，而传统的虚拟化技术方式则需要单独安装每个虚拟机的操作系统。</p>
<table>
<thead>
<tr>
<th>特性</th>
<th>容器</th>
<th>虚拟机</th>
</tr>
</thead>
<tbody><tr>
<td>启动</td>
<td>秒级</td>
<td>分钟级</td>
</tr>
<tr>
<td>硬盘空间</td>
<td>一般为几十MB</td>
<td>一般为10GB</td>
</tr>
<tr>
<td>性能</td>
<td>接近原生</td>
<td>弱于原生</td>
</tr>
<tr>
<td>系统支持量</td>
<td>单机支持上千个容器</td>
<td>一般几十个</td>
</tr>
<tr>
<td>操作系统</td>
<td>与宿主机共享os</td>
<td>宿主机os上运行虚拟机os</td>
</tr>
</tbody></table>
<h2 id="1-9-为什么使用Docker"><a href="#1-9-为什么使用Docker" class="headerlink" title="1.9 为什么使用Docker"></a>1.9 为什么使用Docker</h2><p>作为一种新兴的虚拟化技术，Docker 跟传统的虚拟化方式相比具有 众多的优势。</p>
<ol>
<li><p>Docker 容器的启动可以在秒级实现，这相比传统的虚拟机方式要 快得多。</p>
</li>
<li><p>Docker 对系统资源的利用率很高，一台主机上可以同时运行数千 个 Docker 容器。 </p>
</li>
<li><p>容器除了运行其中的应用外，基本不消耗额外的系统资源，使得 应用的性能很高。传统虚拟机方式运行 10 个完全不同的应用可能我 们会起 10 个虚拟机来部署，而 Docker 只需要启动 10 个隔离的应用 即可。</p>
</li>
<li><p>Docker 可以更快速的交付和部署，大量地节约开发、测试、部署 的时间，对开发和运维人员来说，最希望的就是一次创建或配置，可 以在任意地方正常运行。</p>
</li>
<li><p>更高效的虚拟化，Docker 容器的运行不需要额外的 hypervisor 支 持，它是内核级的虚拟化，因此可以实现更高的性能和效率。</p>
</li>
<li><p>更轻松的迁移和扩展，Docker 容器几乎可以在任意的平台上运行， 包括物理机、虚拟机、公有云、私有云、个人电脑、服务器等，这种兼容性可以让用户轻松地把一个应用程序从一个平台直接迁移到另 一个平台。</p>
</li>
</ol>
<h1 id="第二章-Docker环境搭建"><a href="#第二章-Docker环境搭建" class="headerlink" title="第二章 Docker环境搭建"></a>第二章 Docker环境搭建</h1><h2 id="2-1-Docker的版本"><a href="#2-1-Docker的版本" class="headerlink" title="2.1 Docker的版本"></a>2.1 Docker的版本</h2><p>Docker 从 2013 年 3 月 20 日发布 Docker 0.1，到现在已经发布了多 个版本，从 2017 年 3 月开始 docker 在原来的基础上分为两个分 支版本: Docker CE 和 Docker EE。<br> Docker CE 即社区免费版，可永久免费使用;</p>
<p>Docker EE 即企业版，功能更全，更强调安全，但需付费使用; 本课程介绍 Docker CE 版本，目前 Docker 版本为 18.03<br> Docker 官方网站:<a target="_blank" rel="noopener" href="https://www.docker.com/">https://www.docker.com/</a></p>
<h2 id="2-2-Docker的安装"><a href="#2-2-Docker的安装" class="headerlink" title="2.2 Docker的安装"></a>2.2 Docker的安装</h2><p>首先，我们知道 Docker 并不是容器，它是一个管理容器的引擎。 我们课程采用的 Linux 版本是 CentOS 7，学习 Docker 也更推荐在 Linux 环境下使用;<br> Docker 支持 CentOS 6 及以后的版本;</p>
<p>CentOS7 系统可以直接通过 yum 进行安装: 安装前可以查看一下系统是否已经安装了 Docker:</p>
<p>yum list installed | grep docker<br> 安装:yum install docker -y<br> 安装后，使用 docker –version(docker version，docker -v)查看 docker 是否安装成功，<br> 卸载:<br> yum remove docker.x86_64 -y<br> yum remove docker-client.x86_64 -y<br> yum remove docker-common.x86_64 -y</p>
<h2 id="2-3-Docker服务启动"><a href="#2-3-Docker服务启动" class="headerlink" title="2.3 Docker服务启动"></a>2.3 Docker服务启动</h2><p>安装之后启动Docker服务;</p>
<p>启动:systemctl start docker 或者 service docker start </p>
<p>停止:systemctl stop docker 或者 service docker stop </p>
<p>重启:systemctl restart docker 或者 service docker restart 检查 docker 进程的运行状态:<br> systemctl status docker 或者 service docker status </p>
<p>查看 docker 进程:ps -ef | grep docker</p>
<h2 id="2-4-Docker服务信息"><a href="#2-4-Docker服务信息" class="headerlink" title="2.4 Docker服务信息"></a>2.4 Docker服务信息</h2><p>docker info 查看 docker 系统信息</p>
<p>docker 查看所有的帮助信息</p>
<p>docker commond –help 查看某个 commond 命令的帮助信息</p>
<h2 id="2-5-Docker使用"><a href="#2-5-Docker使用" class="headerlink" title="2.5 Docker使用"></a>2.5 Docker使用</h2><h3 id="2-5-1-Docker的运行机制"><a href="#2-5-1-Docker的运行机制" class="headerlink" title="2.5.1 Docker的运行机制"></a>2.5.1 Docker的运行机制</h3><p>我们知道 Docker 并不是容器，而只是一个管理容器的引擎;<br> Docker 的底层运行原理:<br> Docker 服务启动→下载镜像→启动该镜像得到一个容器→容器里运 行着我们想要的程序;</p>
<p><img src="https://typora-mingwhuang.oss-cn-shenzhen.aliyuncs.com/typora/202112212131392.png" alt="image-20201217001317678"></p>
<h3 id="2-5-2-第一个Docker容器"><a href="#2-5-2-第一个Docker容器" class="headerlink" title="2.5.2 第一个Docker容器"></a>2.5.2 第一个Docker容器</h3><p>Docker运行步骤:</p>
<ol>
<li>将Docker服务启动</li>
<li>下载一个镜像，Docker运行一个容器前需要本地存在有对应的镜像，如果镜像不存在，Docker会从镜像仓库下载(默认是 Docker Hub 公共注册服务器中的仓库 <a target="_blank" rel="noopener" href="https://hub.docker.com)./">https://hub.docker.com)。</a></li>
</ol>
<p>CentOS 下怎么下载(pull)镜像?</p>
<p>从 docker hub 官网搜索要使用的镜像，也可以在命令行使用命令搜索要使用的镜像，比如 docker search tomcat 进行搜索，然后下载所需 要的镜像:<br> 下载镜像:docker pull tomcat</p>
<p>运行镜像:docker run tomcat 前台运行， 要后台运行，加参数 -d 显示本地已有的镜像:docker images</p>
<p><img src="https://typora-mingwhuang.oss-cn-shenzhen.aliyuncs.com/typora/202112212131393.png" alt="image-20201217001937529"></p>
<p>在列出信息中，可以看到几个字段信息 </p>
<p>REPOSITORY:来自于哪个仓库，比如 docker.io&#x2F;tomcat TAG:镜像的标记，比如 latest<br> IMAGE ID:镜像的 ID 号(唯一) </p>
<p>CREATED:创建时间</p>
<p>SIZE:镜像大小</p>
<ol start="3">
<li>启动下载下来的镜像得到一个容器:<br> docker run -d docker.io&#x2F;tomcat 或者 docker run -d 41a54fe1f79d 默认是前台启动，如果需要后台启动，指定-d 参数;</li>
</ol>
<p>通过 ps -ef | grep tomcat 查看，检查 tomcat 镜像是否启动容器成功</p>
<h3 id="2-5-3-进入Docker容器"><a href="#2-5-3-进入Docker容器" class="headerlink" title="2.5.3 进入Docker容器"></a>2.5.3 进入Docker容器</h3><p>进入容器:docker exec -it cef0d139bfd6 bash<br> 其中 i 表示交互式的，也就是保持标准输入流打开; t 表示虚拟控制台，分配到一个虚拟控制台; </p>
<p>退出容器:exit</p>
<h3 id="2-5-4-客户机访问容器"><a href="#2-5-4-客户机访问容器" class="headerlink" title="2.5.4 客户机访问容器"></a>2.5.4 客户机访问容器</h3><p>从客户机上访问容器，需要有端口映射，docker 容器默认采用桥接模 式与宿主机通信，需要将宿主机的 ip 端口映射到容器的 ip 端口上; </p>
<p>停止容器:docker stop 容器 ID&#x2F;名称<br>启动容器:docker run -d -p 8080:8080 docker.io&#x2F;tomcat 或者 41a54fe1f79d</p>
<h1 id="第三章-Docker核心组件"><a href="#第三章-Docker核心组件" class="headerlink" title="第三章 Docker核心组件"></a>第三章 Docker核心组件</h1><h2 id="3-1-Docker架构"><a href="#3-1-Docker架构" class="headerlink" title="3.1 Docker架构"></a>3.1 Docker架构</h2><p>Docker使用客户端-服务器（C&#x2F;S）架构模式，使用远程API来管理和创建Docker容器。</p>
<p><img src="https://typora-mingwhuang.oss-cn-shenzhen.aliyuncs.com/typora/202112212131394.png" alt="image-20201217002508350"></p>
<p>Docker容器通过Docker镜像来创建。</p>
<p>镜像与容器的关系类似于面向对象编程中的类与对象的关系。</p>
<table>
<thead>
<tr>
<th>Docker</th>
<th>面向对象</th>
</tr>
</thead>
<tbody><tr>
<td>镜像</td>
<td>类</td>
</tr>
<tr>
<td>容器</td>
<td>对象</td>
</tr>
</tbody></table>
<h2 id="3-2-Docker核心要素"><a href="#3-2-Docker核心要素" class="headerlink" title="3.2 Docker核心要素"></a>3.2 Docker核心要素</h2><p>Docker包括三个核心要素</p>
<p><strong>镜像(Image)、容器(Container)、仓库(Repository)</strong></p>
<p> 理解了这三个概念，就理解了 Docker 的整个生命周期。 Docker 的运行离不开以上核心几个组件的支持，Docker 的成功也是 拜这几个组件所赐。<br> 有人会误以为，Docker 就是容器，但 Docker 不是容器，而是管理容 器的引擎。</p>
<h2 id="3-3-镜像"><a href="#3-3-镜像" class="headerlink" title="3.3 镜像"></a>3.3 镜像</h2><h3 id="3-3-1-镜像的基本概念"><a href="#3-3-1-镜像的基本概念" class="headerlink" title="3.3.1 镜像的基本概念"></a>3.3.1 镜像的基本概念</h3><p>Docker 镜像就是一个只读的模板，可以用来创建 Docker 容器。 例如:一个镜像可以包含一个完整的 centos 操作系统环境，里面仅 安装了 mysql 或用户需要的其它应用程序。<br> Docker 提供了一个非常简单的机制来创建镜像或者更新现有的镜像， 用户甚至可以直接从其他人那里下载一个已经做好的镜像来直接使 用。</p>
<h3 id="3-3-2-镜像的组成结构"><a href="#3-3-2-镜像的组成结构" class="headerlink" title="3.3.2 镜像的组成结构"></a>3.3.2 镜像的组成结构</h3><p>镜像是由许多层的文件系统叠加构成的，最下面是一个引导文件系统 bootfs，第二层是一个 root 文件系统 rootfs，root 文件系统通常是某 种操作系统，比如 centos、Ubuntu，在 root 文件系统之上又有很多 层文件系统，这些文件系统叠加在一起，构成 docker 中的镜像;</p>
<p><img src="https://typora-mingwhuang.oss-cn-shenzhen.aliyuncs.com/typora/202112212131395.png" alt="image-20201217003937572"></p>
<h3 id="3-3-3-镜像的日常操作"><a href="#3-3-3-镜像的日常操作" class="headerlink" title="3.3.3 镜像的日常操作"></a>3.3.3 镜像的日常操作</h3><ol>
<li><p>下载镜像，比如下载 redis 镜像:docker pull redis:latest<br> reids 是查询到的镜像名称，latest 是镜像的标签 tag 获取一个镜像有两种方式，一种是从官方镜像仓库下载，一种是自己 通过 Dockerfile 文件构建。</p>
<p>如果有官方镜像，我们就不必自己用 Dockerfile 文件构建了，除非官 方没有才会自己去 Dockerfile 文件构建</p>
</li>
<li><p>列出已经下载的镜像:docker images，或者 docker images redis </p>
</li>
<li><p>运行镜像:docker run -d redis 其中-d 表示在后台运行</p>
<p>然后通过 ps -ef | grep redis 可以查到 redis 进程</p>
</li>
<li><p>查看容器镜像的状态:docker ps<br> 通过 docker exec -it a8584016f9b6(镜像 ID) bash 进入 redis 容器 </p>
</li>
<li><p>删除镜像:docker rmi redis:latest 注意是 rmi，不是 rm，rm 是删 除容器;</p>
</li>
</ol>
<h2 id="3-4-容器"><a href="#3-4-容器" class="headerlink" title="3.4 容器"></a>3.4 容器</h2><h3 id="3-4-1-容器的基本概念"><a href="#3-4-1-容器的基本概念" class="headerlink" title="3.4.1 容器的基本概念"></a>3.4.1 容器的基本概念</h3><p>容器是从镜像创建的运行实例。它可以被启动、停止、删除。每个容器都是相互隔离的、保证安全平台。可以把看做一个简易版的 Linux 环境，包括 root 用户权限、进程空间、用户空间和网络空间和运行在其中的应用程序。</p>
<p>Docker利用容器来运行应用，镜像是只读的，容器在启动的时候创建一层可写层作为最上层。</p>
<p><img src="https://typora-mingwhuang.oss-cn-shenzhen.aliyuncs.com/typora/202112212131396.png" alt="image-20201217004722048"></p>
<h3 id="3-4-2-容器的日常操作"><a href="#3-4-2-容器的日常操作" class="headerlink" title="3.4.2 容器的日常操作"></a>3.4.2 容器的日常操作</h3><p>启动容器有两种方式，一种是基于镜像新建一个容器并启动，另外一个是将在终止状态的容器重新启动。</p>
<p>通过镜像启动容器:docker run -d redis<br>查看运行中的容器:docker ps</p>
<p>查看所有的容器:docker ps -a<br>停止容器:docker stop 容器 id 或容器名称 </p>
<p>已经停止的容器，我们可以使用命令 docker start 来启动。 开启容器:docker start 容器 id 或容器名称<br>因为 Docker 的容器实在太轻量级了，很多时候用户都是随时删除和新建容器。</p>
<p>删除容器:docker rm 容器 id 或容器名称 </p>
<p>删除容器时，容器必须是停止状态，否则会报错; </p>
<p>进入容器:docker exec -it 容器 id 或容器名称 bash<br>还可以使用 docker inspect + 容器 id 或容器名称 查看容器的更多信息;<br> 停用全部运行中的容器:docker stop $(docker ps -q) </p>
<p>删除全部容器:docker rm ​$(docker ps -aq) </p>
<p>一条命令实现停用并删除容器:<br> docker stop $(docker ps -q) &amp; docker rm -f $(docker ps -aq)</p>
<h2 id="3-5-仓库"><a href="#3-5-仓库" class="headerlink" title="3.5 仓库"></a>3.5 仓库</h2><h3 id="3-5-1-仓库的基本概念"><a href="#3-5-1-仓库的基本概念" class="headerlink" title="3.5.1 仓库的基本概念"></a>3.5.1 仓库的基本概念</h3><p>仓库是集中存放镜像文件的场所，有时候会把仓库和仓库注册服务器 (Registry)看做同一事物，并不严格区分。实际上，仓库注册服务 器上往往存放着多个仓库，每个仓库中又包含了多个镜像，每个镜像 有不同的标签(tag); 仓库分为公开仓库(Public)和私有仓库(Private)两种形式; 最大的公开仓库是 Docker Hub (<a target="_blank" rel="noopener" href="https://hub.docker.com/)%EF%BC%8C%E5%AD%98%E6%94%BE%E4%BA%86">https://hub.docker.com/)，存放了</a> 数量庞大的镜像供用户下载; 当然，用户也可以在本地网络内创建一个私有仓库;当用户创建了自己的镜像之后就可以使用 push 命令将它上传到公 有或者私有仓库，这样下次在另外一台机器上使用这个镜像时候，只 需要从仓库上 pull 下来即可;<br> 注:Docker 仓库的概念跟 Git 类似，注册服务器也类似于 GitHub 这 样的托管服务;</p>
<h3 id="3-5-2-仓库的日常操作"><a href="#3-5-2-仓库的日常操作" class="headerlink" title="3.5.2 仓库的日常操作"></a>3.5.2 仓库的日常操作</h3><p>用户可通过 docker search 命令来查找官方仓库中的镜像:<br> docker search rabbitmq </p>
<p>可以看到返回了很多包含关键字的镜像，其中包括镜像名字、描述、 星级(表示该镜像的受欢迎程度)、是否官方创建、是否自动创建; 官方的镜像说明是官方项目组创建和维护的，automated 资源允许用 户验证镜像的来源和内容; </p>
<p>根据是否是官方提供，可将镜像资源分为两类;</p>
<p>一种是类似 centos 这样的基础镜像，被称为基础或根镜像。这些基 础镜像是由 Docker 公司创建、验证、支持、提供。这样的镜像往往 使用单个单词作为名字;<br> 还有一种类型，比如 tianon&#x2F;centos 镜像，它是由 Docker 的用户创 建并维护的，往往带有用户名称前缀。可以通过前缀 user_name&#x2F; 来 指定使用某个用户提供的镜像，比如 tianon 用户;</p>
<p>并利用 docker pull 命令来将它下载到本地:</p>
<p>docker pull rabbitmq </p>
<p>docker pull centos</p>
<h1 id="第四章-Docket使用实例"><a href="#第四章-Docket使用实例" class="headerlink" title="第四章 Docket使用实例"></a>第四章 Docket使用实例</h1><h2 id="4-1-Docker-安装-MySQL"><a href="#4-1-Docker-安装-MySQL" class="headerlink" title="4.1 Docker 安装 MySQL"></a>4.1 Docker 安装 MySQL</h2><p>#下载 MySQL 镜像:<br> docker pull mysql:latest (安装的是 mysql 8.0)<br> docker run -p 3306:3306 -e MYSQL_DATABASE&#x3D;workdb -e MYSQL_ROOT_PASSWORD&#x3D;123456 -d mysql:latest<br> 其中-e 是指定环境变量<br> #进入容器:<br> docker exec -it 3e8bf7392b4e bash<br> #登录 MySQL:<br> mysql -u root -p<br> #修改密码:<br> ALTER USER ‘root‘@’localhost’ IDENTIFIED BY ‘123456’; #授权远程登录访问:<br> CREATE USER ‘wkcto‘@’%’ IDENTIFIED WITH mysql_native_password BY ‘123456’;<br> GRANT ALL PRIVILEGES ON <em>.</em> TO ‘ wkcto‘@’%’;</p>
<h2 id="4-2-Docker-安装-Nginx"><a href="#4-2-Docker-安装-Nginx" class="headerlink" title="4.2 Docker 安装 Nginx"></a>4.2 Docker 安装 Nginx</h2><p>#下载 Nginx 镜像:<br> docker pull nginx<br> docker run -d -p 80:80 nginx<br> #进入容器:<br> docker exec -it 3e8bf7392b4e bash<br> #浏览器访问 Nginx:<br> <a target="_blank" rel="noopener" href="http://192.168.230.128/">http://192.168.230.128:80</a><br> #Nginx 部署静态网站:<br> 将 linux 的文件拷贝到 docker 容器某个目录下:<br> docker cp &#x2F;root&#x2F;test.html bf8a58328e18:&#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html</p>
<h2 id="4-3-Dokcer-安装-Zookeeper"><a href="#4-3-Dokcer-安装-Zookeeper" class="headerlink" title="4.3 Dokcer 安装 Zookeeper"></a>4.3 Dokcer 安装 Zookeeper</h2><p>#下载 Zookeeper 镜像:<br> docker pull zookeeper<br> docker run -p 2181:2181 -d zookeeper </p>
<p>#进入容器:<br> docker exec -it 3e8bf7392b4e bash </p>
<p>#客户端工具访问 Zookeeper:</p>
<h2 id="4-4-Docker-安装-ActiveMQ"><a href="#4-4-Docker-安装-ActiveMQ" class="headerlink" title="4.4 Docker 安装 ActiveMQ"></a>4.4 Docker 安装 ActiveMQ</h2><p>#下载 ActiveMQ 镜像:<br> docker pull webcenter&#x2F;activemq </p>
<p>docker run -p 8161:8161 -d activemq </p>
<p>#进入容器:<br> docker exec -it 3e8bf7392b4e bash </p>
<p>#浏览器访问 activemq:</p>
<h1 id="第五章-Docker-自定义镜像"><a href="#第五章-Docker-自定义镜像" class="headerlink" title="第五章 Docker 自定义镜像"></a>第五章 Docker 自定义镜像</h1><h2 id="5-1-认识-Dockerfile-文件"><a href="#5-1-认识-Dockerfile-文件" class="headerlink" title="5.1 认识 Dockerfile 文件"></a>5.1 认识 Dockerfile 文件</h2><p>Dockerfile 用于构建 Docker 镜像，Dockerfile 文件是由一行行命令语句 组成，基于这些命令即可以构建一个镜像，比如下面就是一个</p>
<p>Dockefile 文件样例:</p>
<p>FROM XXX&#x2F;jdk:8<br> MAINTAINER docker_user<br> ENV JAVA_HOME &#x2F;usr&#x2F;local&#x2F;java<br> ADD apache-tomcat-8.0.32.tar.gz &#x2F;usr&#x2F;local&#x2F; RUN mv apache-tomcat-8.0.32 tomcat8<br> EXPOSE 8080<br> RUN chmod u+x &#x2F;usr&#x2F;local&#x2F;tomcat8&#x2F;bin&#x2F;*.sh CMD &#x2F;usr&#x2F;local&#x2F;tomcat8&#x2F;bin&#x2F;catalina.sh start</p>
<h2 id="5-2-Dockerfile-的基本结构"><a href="#5-2-Dockerfile-的基本结构" class="headerlink" title="5.2 Dockerfile 的基本结构"></a>5.2 Dockerfile 的基本结构</h2><p>一般的，Dockerfile 分为四部分:</p>
<ul>
<li>基础镜像信息;</li>
<li>维护者信息;</li>
<li>镜像操作指令;</li>
<li>容器启动时执行指令;</li>
</ul>
<h2 id="5-3-Dockerfile-指令"><a href="#5-3-Dockerfile-指令" class="headerlink" title="5.3 Dockerfile 指令"></a>5.3 Dockerfile 指令</h2><p><strong>FROM</strong></p>
<p>格式为 FROM <image> 或 FROM <image>:<tag><br> Dockerfile 文件的第一条指令必须为 FROM 指令。并且，如果在同一 个 Dockerfile 中创建多个镜像时，可以使用多个 FROM 指令(每个镜 像一次);<br> **MAINTAINER<br>** 格式为 MAINTAINER <name>，指定维护者信息;<br> **ENV<br>** 格式为 ENV <key> <value>，指定一个环境变量，会被后续 RUN 指令 使用，并在容器运行时保持;<br> **ADD<br>** 格式为 ADD <src> <dest>;<br> 复制指定的<src>到容器中的<dest>;<br> **EXPOSE<br>** 格式为 EXPOSE <port> [<port>…]</p>
<p>告诉 Docker 服务端容器暴露的端口号，供互联系统使用，在启动容 器时需要通过 -p映射端口，Docker 主机会自动分配一个端口转发到 指定的端口;<br> <strong>RUN</strong></p>
<p>格式为 RUN <command><br> RUN 指令将在当前镜像基础上执行指定命令，并提交为新的镜像， 当命令较长时可以使用 \ 来换行;<br> **CMD<br>** 指定启动容器时执行的命令，每个 Dockerfile 只能有一条 CMD 命令。 如果指定了多条命令，只有最后一条会被执行。 如果用户启动容器时候指定了运行的命令，则会覆盖掉 CMD 指定的 命令。</p>
<h2 id="5-4-Dockerfile-自定义镜像"><a href="#5-4-Dockerfile-自定义镜像" class="headerlink" title="5.4 Dockerfile 自定义镜像"></a>5.4 Dockerfile 自定义镜像</h2><h3 id="5-4-1-自定义-JDK-镜像"><a href="#5-4-1-自定义-JDK-镜像" class="headerlink" title="5.4.1 自定义 JDK 镜像"></a>5.4.1 自定义 JDK 镜像</h3><p>FROM centos:latest<br> MAINTAINER wkcto<br> ADD jdk-8u121-linux-x64.tar.gz &#x2F;usr&#x2F;local<br> ENV JAVA_HOME &#x2F;usr&#x2F;local&#x2F;jdk1.8.0_121<br> ENV CLASSPATH $JAVA_HOME&#x2F;lib&#x2F;dt.jar:$JAVA_HOME&#x2F;lib&#x2F;tools.jar ENV PATH $PATH:$JAVA_HOME&#x2F;bin<br> CMD java -version</p>
<p>构建镜像:docker build -t wkcto_jdk1.8.0_121 . </p>
<p>运行镜像:docker run -d ac84bde53958</p>
<h3 id="5-4-2-自定义-Tomcat-镜像"><a href="#5-4-2-自定义-Tomcat-镜像" class="headerlink" title="5.4.2 自定义 Tomcat 镜像"></a>5.4.2 自定义 Tomcat 镜像</h3><p>定义 Dockerfile 文件:</p>
<p>FROM wkcto_jdk1.8.0_121<br> MAINTAINER wkcto<br> ADD apache-tomcat-8.5.24.tar.gz &#x2F;usr&#x2F;local&#x2F;<br> ENV CATALINA_HOME &#x2F;usr&#x2F;local&#x2F;apache-tomcat-8.5.24<br> ENV PATH $PATH:$CATALINA_HOME&#x2F;lib:$CATALINA_HOME&#x2F;bin EXPOSE 8080<br> CMD &#x2F;usr&#x2F;local&#x2F;apache-tomcat-8.5.24&#x2F;bin&#x2F;catalina.sh run</p>
<p>构建镜像:docker build -t wkcto-tomcat-8.5.24 . </p>
<p>运行镜像:docker run -d -p 8080:8080 ab41b5f48256</p>
<h3 id="5-4-3-自定义-MySQL-镜像"><a href="#5-4-3-自定义-MySQL-镜像" class="headerlink" title="5.4.3 自定义 MySQL 镜像"></a>5.4.3 自定义 MySQL 镜像</h3><p>定义 Dockerfile 文件:</p>
<p>FROM centos:centos6<br> MAINTAINER wkcto<br> RUN yum install mysql-server mysql -y RUN &#x2F;etc&#x2F;init.d&#x2F;mysqld start &amp;&amp;\</p>
<p>mysql -e “grant all privileges on <em>.</em> to ‘root‘@’%’ identified by ‘123456’ WITH GRANT OPTION ;”&amp;&amp;\</p>
<p>mysql -e “grant all privileges on <em>.</em> to ‘root‘@’localhost’ identified by ‘123456’ WITH GRANT OPTION ;”&amp;&amp;\</p>
<p>mysql -uroot -p123456 -e “show databases;” EXPOSE 3306</p>
<p>CMD &#x2F;usr&#x2F;bin&#x2F;mysqld_safe </p>
<p>构建镜像:docker build -t wkcto-mysql .</p>
<p>运行镜像:docker run -d -p 3306:3306 09ce279d92df </p>
<h3 id="5-4-4-自定义-Redis-镜像"><a href="#5-4-4-自定义-Redis-镜像" class="headerlink" title="5.4.4 自定义 Redis 镜像"></a>5.4.4 自定义 Redis 镜像</h3><p> 定义 Dockerfile 文件:</p>
<p>FROM centos:latest<br> MAINTAINER wkcto<br> RUN yum install epel-release -y &amp;&amp; yum install redis -y &amp;&amp; yum install net-tools -y EXPOSE 6379<br> CMD &#x2F;usr&#x2F;bin&#x2F;redis-server –protected-mode no</p>
<p>构建镜像:docker build -t wkcto-redis . </p>
<p>运行镜像:docker run -d -p 6379:6379 390583cf0531</p>
<h2 id="5-5-镜像发布到仓库"><a href="#5-5-镜像发布到仓库" class="headerlink" title="5.5 镜像发布到仓库"></a>5.5 镜像发布到仓库</h2><h3 id="5-5-1-阿里云容器镜像仓库"><a href="#5-5-1-阿里云容器镜像仓库" class="headerlink" title="5.5.1 阿里云容器镜像仓库"></a>5.5.1 阿里云容器镜像仓库</h3><p>网址:<a target="_blank" rel="noopener" href="https://dev.aliyun.com/">https://dev.aliyun.com</a></p>
<h3 id="5-5-2-注册阿里云镜像仓库"><a href="#5-5-2-注册阿里云镜像仓库" class="headerlink" title="5.5.2 注册阿里云镜像仓库"></a>5.5.2 注册阿里云镜像仓库</h3><p>如果没有阿里云账号，需要注册一个阿里云账号; 也可以使用淘宝账号、支付宝账号登录;</p>
<h3 id="5-5-3-发布镜像阿里云镜像仓库"><a href="#5-5-3-发布镜像阿里云镜像仓库" class="headerlink" title="5.5.3 发布镜像阿里云镜像仓库"></a>5.5.3 发布镜像阿里云镜像仓库</h3><p>登录阿里云镜像，进入管理中心，在自己我管理中心中，左侧点击镜 像仓库菜单，如果自己没有镜像仓库的话，需要创建一个镜像仓库; 对自己的镜像仓库点击管理链接，按照操作指南进行操作即可;</p>
<ol>
<li><p>登录阿里云 Docker Registry</p>
<p>docker login --username&#x3D;<a href="mailto:&#104;&#105;&#51;&#x35;&#51;&#51;&#49;&#x37;&#x31;&#48;&#64;&#97;&#x6c;&#x69;&#x79;&#117;&#110;&#x2e;&#99;&#x6f;&#x6d;">&#104;&#105;&#51;&#x35;&#51;&#51;&#49;&#x37;&#x31;&#48;&#64;&#97;&#x6c;&#x69;&#x79;&#117;&#110;&#x2e;&#99;&#x6f;&#x6d;</a> registry.cn-qingdao.aliyuncs.com</p>
<p>用于登录的用户名为阿里云账号全名，密码为开通服务时设置的密码。 您可以在产品控制台首页修改登录密码。</p>
<p><img src="https://typora-mingwhuang.oss-cn-shenzhen.aliyuncs.com/typora/202112212131397.png" alt="image-20201217011107880"></p>
</li>
<li><p>将镜像推送到 Registry</p>
</li>
</ol>
<p>docker tag [ImageId] registry.cn-qingdao.aliyuncs.com&#x2F;123test&#x2F;1234test:[ 镜 像 版 本 号 ] docker push registry.cn-qingdao.aliyuncs.com&#x2F;123test&#x2F;1234test:[镜像版本号] </p>
<p>请根据实际镜像信息替换示例中的[ImageId]和[镜像版本号]参数。</p>
<p>imageId: a78da0202f84</p>
<p>docker tag a78da0202f84 registry.cn-qingdao.aliyuncs.com&#x2F;123test&#x2F;1234test:latest docker push registry.cn-qingdao.aliyuncs.com&#x2F;123test&#x2F;1234test:latest</p>
<p><img src="https://typora-mingwhuang.oss-cn-shenzhen.aliyuncs.com/typora/202112212131398.png" alt="image-20201217011146337"></p>
<h3 id="5-5-4-Docker-hub-镜像加速"><a href="#5-5-4-Docker-hub-镜像加速" class="headerlink" title="5-5-4 Docker hub 镜像加速"></a>5-5-4 Docker hub 镜像加速</h3><p>&#x2F;etc&#x2F;docker&#x2F;daemon.json</p>
<p>{“registry-mirrors”: [“<a href="https://gg3gwnry.mirror.aliyuncs.com&quot;]}">https://gg3gwnry.mirror.aliyuncs.com&quot;]}</a></p>
<h1 id="第六章-Docker-应用部署"><a href="#第六章-Docker-应用部署" class="headerlink" title="第六章 Docker 应用部署"></a>第六章 Docker 应用部署</h1><h2 id="6-1-部署一个-SpringBoot-项目"><a href="#6-1-部署一个-SpringBoot-项目" class="headerlink" title="6.1 部署一个 SpringBoot 项目"></a>6.1 部署一个 SpringBoot 项目</h2><ol>
<li><p>将开发的 springboot 程序打成 jar 包或者 war 包;</p>
</li>
<li><p>将打好的 jar 包或 war 包上传到 Linux 某个目录下，比如:&#x2F;root&#x2F;docker</p>
</li>
<li><p>定义 Dockerfile 文件，用于创建项目镜像;</p>
</li>
</ol>
<h2 id="6-2-Docker-部署-Jar-包-SpringBoot-程序"><a href="#6-2-Docker-部署-Jar-包-SpringBoot-程序" class="headerlink" title="6-2 Docker 部署 Jar 包 SpringBoot 程序"></a>6-2 Docker 部署 Jar 包 SpringBoot 程序</h2><h3 id="6-2-1-定义-Jar-包程序-Dockerfile-文件"><a href="#6-2-1-定义-Jar-包程序-Dockerfile-文件" class="headerlink" title="6-2-1 定义 Jar 包程序 Dockerfile 文件"></a>6-2-1 定义 Jar 包程序 Dockerfile 文件</h3><p>FROM wkcto_jdk1.8.0_121<br> MAINTAINER wkcto<br> ADD springboot-web-1.0.0.jar &#x2F;opt<br> RUN chmod +x &#x2F;opt&#x2F;springboot-web-1.0.0.jar CMD java -jar &#x2F;opt&#x2F;springboot-web-1.0.0.jar</p>
<h3 id="6-2-2-构建和运行-Jar-包程序的镜像"><a href="#6-2-2-构建和运行-Jar-包程序的镜像" class="headerlink" title="6-2-2 构建和运行 Jar 包程序的镜像"></a>6-2-2 构建和运行 Jar 包程序的镜像</h3><p>构建镜像:docker build -t springboot-web-jar .</p>
<p>运行容器:docker run -d ac84bde53958</p>
<h3 id="6-2-3-Jar-包程序依赖容器环境准备"><a href="#6-2-3-Jar-包程序依赖容器环境准备" class="headerlink" title="6-2-3 Jar 包程序依赖容器环境准备"></a>6-2-3 Jar 包程序依赖容器环境准备</h3><p>运行 Redis 容器:docker run -p 6379:6379 -d redis</p>
<p>运行 MySQL 容器:docker run -p 3306:3306 -e MYSQL_DATABASE&#x3D;workdb -e MYSQL_ROOT_PASSWORD&#x3D;123456 -d mysql:latest<br> **修改容器保存:**docker commit 容器 id xxx(镜像名:tagxxx)</p>
<p>比如:docker commit b034f6d23833 wkcto_mysql_new </p>
<h3 id="6-2-4-运行-Docker-化的-Jar-包程序"><a href="#6-2-4-运行-Docker-化的-Jar-包程序" class="headerlink" title="6-2-4 运行 Docker 化的 Jar 包程序"></a>6-2-4 运行 Docker 化的 Jar 包程序</h3><p>通过 windows 的浏览器访问，验证 SpringBoot 项目是否可以正常访问;</p>
<h2 id="6-3-Docker-部署-War-包-SpringBoot-程序"><a href="#6-3-Docker-部署-War-包-SpringBoot-程序" class="headerlink" title="6-3 Docker 部署 War 包 SpringBoot 程序"></a>6-3 Docker 部署 War 包 SpringBoot 程序</h2><h3 id="6-3-1-定义-War-包程序-Dockerfile-文件"><a href="#6-3-1-定义-War-包程序-Dockerfile-文件" class="headerlink" title="6-3-1 定义 War 包程序 Dockerfile 文件"></a>6-3-1 定义 War 包程序 Dockerfile 文件</h3><p>FROM wkcto-tomcat-8.5.24<br> MAINTAINER wkcto<br> ADD springboot-web-1.0.0.war &#x2F;usr&#x2F;local&#x2F;apache-tomcat-8.5.24&#x2F;webapps EXPOSE 8080<br> CMD &#x2F;usr&#x2F;local&#x2F;apache-tomcat-8.5.24&#x2F;bin&#x2F;catalina.sh run</p>
<h3 id="6-3-2-构建和运行-War-包程序的镜像"><a href="#6-3-2-构建和运行-War-包程序的镜像" class="headerlink" title="6-3-2 构建和运行 War 包程序的镜像"></a>6-3-2 构建和运行 War 包程序的镜像</h3><p>构建镜像:docker build -t springboot-web-war .</p>
<h3 id="6-3-3-War-包程序依赖容器环境准备"><a href="#6-3-3-War-包程序依赖容器环境准备" class="headerlink" title="6-3-3 War 包程序依赖容器环境准备"></a>6-3-3 War 包程序依赖容器环境准备</h3><p>与上面部署 Jar 程序依赖的容器环境一样;</p>
<h3 id="6-3-4-运行-Docker-化的-War-包程序"><a href="#6-3-4-运行-Docker-化的-War-包程序" class="headerlink" title="6-3-4 运行 Docker 化的 War 包程序"></a>6-3-4 运行 Docker 化的 War 包程序</h3><p>通过 windows 的浏览器访问，验证 SpringBoot 项目是否可以正常访问; springboot-web-1.0.0.war → springboot-web-1.0.0</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">MingwHuang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2021/12/21/Docker/Docker/">http://example.com/2021/12/21/Docker/Docker/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">MingwHuang's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Docker/">Docker</a></div><div class="post_share"><div class="social-share" data-image="https://typora-mingwhuang.oss-cn-shenzhen.aliyuncs.com/typora/202202272047554.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://typora-mingwhuang.oss-cn-shenzhen.aliyuncs.com/typora/202202172251674.png" target="_blank"><img class="post-qr-code-img" src="https://typora-mingwhuang.oss-cn-shenzhen.aliyuncs.com/typora/202202172251674.png" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://typora-mingwhuang.oss-cn-shenzhen.aliyuncs.com/typora/202202172251973.png" target="_blank"><img class="post-qr-code-img" src="https://typora-mingwhuang.oss-cn-shenzhen.aliyuncs.com/typora/202202172251973.png" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/12/21/Java/SpringCloud/"><img class="prev-cover" src="https://typora-mingwhuang.oss-cn-shenzhen.aliyuncs.com/typora/202202272046164.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">SpringCloud</div></div></a></div><div class="next-post pull-right"><a href="/2021/12/21/leyou/Java%E6%A1%86%E6%9E%B6/"><img class="next-cover" src="https://typora-mingwhuang.oss-cn-shenzhen.aliyuncs.com/typora/202202272046164.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Spring</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://typora-mingwhuang.oss-cn-shenzhen.aliyuncs.com/typora/202202272113875.JPG" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">MingwHuang</div><div class="author-info__description">朝花夕拾 聊以记之</div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">42</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">41</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">20</div></a></div></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0-Docker%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">第一章 Docker概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E8%99%9A%E6%8B%9F%E5%8C%96%E6%8A%80%E6%9C%AF%E5%8F%91%E5%B1%95%E5%8F%B2"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 虚拟化技术发展史</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E8%99%9A%E6%8B%9F%E5%8C%96%E6%8A%80%E6%9C%AF%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">1.2.</span> <span class="toc-text">1.2 虚拟化技术是什么？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-%E8%99%9A%E6%8B%9F%E5%8C%96%E6%8A%80%E6%9C%AF%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">1.3.</span> <span class="toc-text">1.3 虚拟化技术的分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-%E8%99%9A%E6%8B%9F%E5%8C%96%E6%8A%80%E6%9C%AF%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-number">1.4.</span> <span class="toc-text">1.4 虚拟化技术的优缺点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5-%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF%E7%9A%84%E5%8F%91%E5%B1%95"><span class="toc-number">1.5.</span> <span class="toc-text">1.5 容器技术的发展</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-6-Docker%E7%9A%84%E5%8F%91%E5%B1%95%E5%8E%86%E5%8F%B2"><span class="toc-number">1.6.</span> <span class="toc-text">1.6 Docker的发展历史</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-7-Docker%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">1.7.</span> <span class="toc-text">1.7 Docker是什么</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-8-%E5%AE%B9%E5%99%A8%E5%92%8C%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.8.</span> <span class="toc-text">1.8 容器和虚拟机的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-9-%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8Docker"><span class="toc-number">1.9.</span> <span class="toc-text">1.9 为什么使用Docker</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0-Docker%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-number">2.</span> <span class="toc-text">第二章 Docker环境搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-Docker%E7%9A%84%E7%89%88%E6%9C%AC"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 Docker的版本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-Docker%E7%9A%84%E5%AE%89%E8%A3%85"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 Docker的安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-Docker%E6%9C%8D%E5%8A%A1%E5%90%AF%E5%8A%A8"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 Docker服务启动</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-Docker%E6%9C%8D%E5%8A%A1%E4%BF%A1%E6%81%AF"><span class="toc-number">2.4.</span> <span class="toc-text">2.4 Docker服务信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-Docker%E4%BD%BF%E7%94%A8"><span class="toc-number">2.5.</span> <span class="toc-text">2.5 Docker使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-1-Docker%E7%9A%84%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6"><span class="toc-number">2.5.1.</span> <span class="toc-text">2.5.1 Docker的运行机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-2-%E7%AC%AC%E4%B8%80%E4%B8%AADocker%E5%AE%B9%E5%99%A8"><span class="toc-number">2.5.2.</span> <span class="toc-text">2.5.2 第一个Docker容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-3-%E8%BF%9B%E5%85%A5Docker%E5%AE%B9%E5%99%A8"><span class="toc-number">2.5.3.</span> <span class="toc-text">2.5.3 进入Docker容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-4-%E5%AE%A2%E6%88%B7%E6%9C%BA%E8%AE%BF%E9%97%AE%E5%AE%B9%E5%99%A8"><span class="toc-number">2.5.4.</span> <span class="toc-text">2.5.4 客户机访问容器</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0-Docker%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6"><span class="toc-number">3.</span> <span class="toc-text">第三章 Docker核心组件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-Docker%E6%9E%B6%E6%9E%84"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 Docker架构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-Docker%E6%A0%B8%E5%BF%83%E8%A6%81%E7%B4%A0"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 Docker核心要素</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-%E9%95%9C%E5%83%8F"><span class="toc-number">3.3.</span> <span class="toc-text">3.3 镜像</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-1-%E9%95%9C%E5%83%8F%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">3.3.1.</span> <span class="toc-text">3.3.1 镜像的基本概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-2-%E9%95%9C%E5%83%8F%E7%9A%84%E7%BB%84%E6%88%90%E7%BB%93%E6%9E%84"><span class="toc-number">3.3.2.</span> <span class="toc-text">3.3.2 镜像的组成结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-3-%E9%95%9C%E5%83%8F%E7%9A%84%E6%97%A5%E5%B8%B8%E6%93%8D%E4%BD%9C"><span class="toc-number">3.3.3.</span> <span class="toc-text">3.3.3 镜像的日常操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-%E5%AE%B9%E5%99%A8"><span class="toc-number">3.4.</span> <span class="toc-text">3.4 容器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-1-%E5%AE%B9%E5%99%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">3.4.1.</span> <span class="toc-text">3.4.1 容器的基本概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-2-%E5%AE%B9%E5%99%A8%E7%9A%84%E6%97%A5%E5%B8%B8%E6%93%8D%E4%BD%9C"><span class="toc-number">3.4.2.</span> <span class="toc-text">3.4.2 容器的日常操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5-%E4%BB%93%E5%BA%93"><span class="toc-number">3.5.</span> <span class="toc-text">3.5 仓库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-1-%E4%BB%93%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">3.5.1.</span> <span class="toc-text">3.5.1 仓库的基本概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-2-%E4%BB%93%E5%BA%93%E7%9A%84%E6%97%A5%E5%B8%B8%E6%93%8D%E4%BD%9C"><span class="toc-number">3.5.2.</span> <span class="toc-text">3.5.2 仓库的日常操作</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0-Docket%E4%BD%BF%E7%94%A8%E5%AE%9E%E4%BE%8B"><span class="toc-number">4.</span> <span class="toc-text">第四章 Docket使用实例</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-Docker-%E5%AE%89%E8%A3%85-MySQL"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 Docker 安装 MySQL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-Docker-%E5%AE%89%E8%A3%85-Nginx"><span class="toc-number">4.2.</span> <span class="toc-text">4.2 Docker 安装 Nginx</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-Dokcer-%E5%AE%89%E8%A3%85-Zookeeper"><span class="toc-number">4.3.</span> <span class="toc-text">4.3 Dokcer 安装 Zookeeper</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4-Docker-%E5%AE%89%E8%A3%85-ActiveMQ"><span class="toc-number">4.4.</span> <span class="toc-text">4.4 Docker 安装 ActiveMQ</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E7%AB%A0-Docker-%E8%87%AA%E5%AE%9A%E4%B9%89%E9%95%9C%E5%83%8F"><span class="toc-number">5.</span> <span class="toc-text">第五章 Docker 自定义镜像</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-%E8%AE%A4%E8%AF%86-Dockerfile-%E6%96%87%E4%BB%B6"><span class="toc-number">5.1.</span> <span class="toc-text">5.1 认识 Dockerfile 文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-Dockerfile-%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="toc-number">5.2.</span> <span class="toc-text">5.2 Dockerfile 的基本结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-Dockerfile-%E6%8C%87%E4%BB%A4"><span class="toc-number">5.3.</span> <span class="toc-text">5.3 Dockerfile 指令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4-Dockerfile-%E8%87%AA%E5%AE%9A%E4%B9%89%E9%95%9C%E5%83%8F"><span class="toc-number">5.4.</span> <span class="toc-text">5.4 Dockerfile 自定义镜像</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-1-%E8%87%AA%E5%AE%9A%E4%B9%89-JDK-%E9%95%9C%E5%83%8F"><span class="toc-number">5.4.1.</span> <span class="toc-text">5.4.1 自定义 JDK 镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-2-%E8%87%AA%E5%AE%9A%E4%B9%89-Tomcat-%E9%95%9C%E5%83%8F"><span class="toc-number">5.4.2.</span> <span class="toc-text">5.4.2 自定义 Tomcat 镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-3-%E8%87%AA%E5%AE%9A%E4%B9%89-MySQL-%E9%95%9C%E5%83%8F"><span class="toc-number">5.4.3.</span> <span class="toc-text">5.4.3 自定义 MySQL 镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-4-%E8%87%AA%E5%AE%9A%E4%B9%89-Redis-%E9%95%9C%E5%83%8F"><span class="toc-number">5.4.4.</span> <span class="toc-text">5.4.4 自定义 Redis 镜像</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-5-%E9%95%9C%E5%83%8F%E5%8F%91%E5%B8%83%E5%88%B0%E4%BB%93%E5%BA%93"><span class="toc-number">5.5.</span> <span class="toc-text">5.5 镜像发布到仓库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-1-%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%B9%E5%99%A8%E9%95%9C%E5%83%8F%E4%BB%93%E5%BA%93"><span class="toc-number">5.5.1.</span> <span class="toc-text">5.5.1 阿里云容器镜像仓库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-2-%E6%B3%A8%E5%86%8C%E9%98%BF%E9%87%8C%E4%BA%91%E9%95%9C%E5%83%8F%E4%BB%93%E5%BA%93"><span class="toc-number">5.5.2.</span> <span class="toc-text">5.5.2 注册阿里云镜像仓库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-3-%E5%8F%91%E5%B8%83%E9%95%9C%E5%83%8F%E9%98%BF%E9%87%8C%E4%BA%91%E9%95%9C%E5%83%8F%E4%BB%93%E5%BA%93"><span class="toc-number">5.5.3.</span> <span class="toc-text">5.5.3 发布镜像阿里云镜像仓库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-4-Docker-hub-%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F"><span class="toc-number">5.5.4.</span> <span class="toc-text">5-5-4 Docker hub 镜像加速</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E7%AB%A0-Docker-%E5%BA%94%E7%94%A8%E9%83%A8%E7%BD%B2"><span class="toc-number">6.</span> <span class="toc-text">第六章 Docker 应用部署</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-%E9%83%A8%E7%BD%B2%E4%B8%80%E4%B8%AA-SpringBoot-%E9%A1%B9%E7%9B%AE"><span class="toc-number">6.1.</span> <span class="toc-text">6.1 部署一个 SpringBoot 项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-Docker-%E9%83%A8%E7%BD%B2-Jar-%E5%8C%85-SpringBoot-%E7%A8%8B%E5%BA%8F"><span class="toc-number">6.2.</span> <span class="toc-text">6-2 Docker 部署 Jar 包 SpringBoot 程序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-1-%E5%AE%9A%E4%B9%89-Jar-%E5%8C%85%E7%A8%8B%E5%BA%8F-Dockerfile-%E6%96%87%E4%BB%B6"><span class="toc-number">6.2.1.</span> <span class="toc-text">6-2-1 定义 Jar 包程序 Dockerfile 文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-2-%E6%9E%84%E5%BB%BA%E5%92%8C%E8%BF%90%E8%A1%8C-Jar-%E5%8C%85%E7%A8%8B%E5%BA%8F%E7%9A%84%E9%95%9C%E5%83%8F"><span class="toc-number">6.2.2.</span> <span class="toc-text">6-2-2 构建和运行 Jar 包程序的镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-3-Jar-%E5%8C%85%E7%A8%8B%E5%BA%8F%E4%BE%9D%E8%B5%96%E5%AE%B9%E5%99%A8%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87"><span class="toc-number">6.2.3.</span> <span class="toc-text">6-2-3 Jar 包程序依赖容器环境准备</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-4-%E8%BF%90%E8%A1%8C-Docker-%E5%8C%96%E7%9A%84-Jar-%E5%8C%85%E7%A8%8B%E5%BA%8F"><span class="toc-number">6.2.4.</span> <span class="toc-text">6-2-4 运行 Docker 化的 Jar 包程序</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-Docker-%E9%83%A8%E7%BD%B2-War-%E5%8C%85-SpringBoot-%E7%A8%8B%E5%BA%8F"><span class="toc-number">6.3.</span> <span class="toc-text">6-3 Docker 部署 War 包 SpringBoot 程序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-1-%E5%AE%9A%E4%B9%89-War-%E5%8C%85%E7%A8%8B%E5%BA%8F-Dockerfile-%E6%96%87%E4%BB%B6"><span class="toc-number">6.3.1.</span> <span class="toc-text">6-3-1 定义 War 包程序 Dockerfile 文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-2-%E6%9E%84%E5%BB%BA%E5%92%8C%E8%BF%90%E8%A1%8C-War-%E5%8C%85%E7%A8%8B%E5%BA%8F%E7%9A%84%E9%95%9C%E5%83%8F"><span class="toc-number">6.3.2.</span> <span class="toc-text">6-3-2 构建和运行 War 包程序的镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-3-War-%E5%8C%85%E7%A8%8B%E5%BA%8F%E4%BE%9D%E8%B5%96%E5%AE%B9%E5%99%A8%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87"><span class="toc-number">6.3.3.</span> <span class="toc-text">6-3-3 War 包程序依赖容器环境准备</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-4-%E8%BF%90%E8%A1%8C-Docker-%E5%8C%96%E7%9A%84-War-%E5%8C%85%E7%A8%8B%E5%BA%8F"><span class="toc-number">6.3.4.</span> <span class="toc-text">6-3-4 运行 Docker 化的 War 包程序</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/02/26/%E9%9D%A2%E8%AF%95/Redis/" title="Redis"><img src="https://typora-mingwhuang.oss-cn-shenzhen.aliyuncs.com/typora/202202272046012.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Redis"/></a><div class="content"><a class="title" href="/2022/02/26/%E9%9D%A2%E8%AF%95/Redis/" title="Redis">Redis</a><time datetime="2022-02-26T06:21:50.000Z" title="发表于 2022-02-26 14:21:50">2022-02-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/02/26/K8S/" title="无题"><img src="https://typora-mingwhuang.oss-cn-shenzhen.aliyuncs.com/typora/202202272047300.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/2022/02/26/K8S/" title="无题">无题</a><time datetime="2022-02-26T01:48:42.239Z" title="发表于 2022-02-26 09:48:42">2022-02-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/02/26/Chaos/Chaos/" title="无题"><img src="https://typora-mingwhuang.oss-cn-shenzhen.aliyuncs.com/typora/202202272046990.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/2022/02/26/Chaos/Chaos/" title="无题">无题</a><time datetime="2022-02-26T01:48:42.239Z" title="发表于 2022-02-26 09:48:42">2022-02-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/02/20/Mac-%E6%B7%B1%E5%BA%A6%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/" title="Mac 深度使用技巧"><img src="https://typora-mingwhuang.oss-cn-shenzhen.aliyuncs.com/typora/202202272046164.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Mac 深度使用技巧"/></a><div class="content"><a class="title" href="/2022/02/20/Mac-%E6%B7%B1%E5%BA%A6%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/" title="Mac 深度使用技巧">Mac 深度使用技巧</a><time datetime="2022-02-20T14:38:23.000Z" title="发表于 2022-02-20 22:38:23">2022-02-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/02/15/%E9%9D%A2%E8%AF%95/MySQL/" title="MySQL"><img src="https://typora-mingwhuang.oss-cn-shenzhen.aliyuncs.com/typora/202202272046348.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL"/></a><div class="content"><a class="title" href="/2022/02/15/%E9%9D%A2%E8%AF%95/MySQL/" title="MySQL">MySQL</a><time datetime="2022-02-15T10:46:58.000Z" title="发表于 2022-02-15 18:46:58">2022-02-15</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By MingwHuang</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a><span class="footer-separator">|</span><a href="https://beian.miit.gov.cn/" target="_blank">赣ICP备2022001353号-1</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">本地搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.2
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container:not\([display]\)').forEach(node => {
            const target = node.parentNode
            if (target.nodeName.toLowerCase() === 'li') {
              target.parentNode.classList.add('has-jax')
            } else {
              target.classList.add('has-jax')
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>